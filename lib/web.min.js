(function(){var e,t,n,r;e=null,t=null,n={host:function(t){var n,r;return r=t.length,n=t[r-1],"/"!==n&&(t+="/"),e=t},onError:function(e){return t=e},fromDataURL:function(e){var t;return t=e.replace(/data:.*;base64,/,""),"/Base64("+t+")/"},call:function(n,a){var o,u,s;return null==a&&(a={}),r(a,function(e,t,n){var r,a;if(e instanceof Date)return r=e,a=r.getTime(),n[t]="/Date("+a+")/"}),u=""+e+n,a=JSON.stringify(a),s=new XMLHttpRequest,s.open("POST",u,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o=localStorage.getItem("Rubic-Token"),o&&s.setRequestHeader("Rubic-Token",o),s.send(a),new Promise(function(e,n){return s.onreadystatechange=function(){var u;if(s.readyState===XMLHttpRequest.DONE&&(o=s.getResponseHeader("Rubic-Token"),o&&localStorage.setItem("Rubic-Token",o),204===s.status&&e(),200===s.status&&(a=JSON.parse(s.responseText),r(a,function(e,t,n){var r;if(/^\/Date\(\d+\)\/$/.test(e))return e=e.slice(6,e.length-2),r=parseInt(e),n[t]=new Date(r)}),e(a)),s.status>=400))return u=JSON.parse(s.responseText),t&&t(u),n(u)}})}},global?global.Rubic=n:window&&(window.Rubic=n),r=function(e,t){var n;return(n=function(e,r,a){var o,u,s,i,c,l,f,p;if("boolean"===(p=typeof e)||"number"===p||"string"===p||e instanceof Date)return t(e,r,a);if(Array.isArray(e)){for(l=[],s=i=0,c=e.length;i<c;s=++i)o=e[s],l.push(n(o,s,e));return l}if("object"==typeof e){f=[];for(u in e)o=e[u],f.push(n(o,u,e));return f}})(e,null,null)}}).call(this);