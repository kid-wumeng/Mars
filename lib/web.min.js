var $catch,$host,forData;$host=null,$catch=null,exports.host=function(t){var e,n;return n=t.length,e=t[n-1],"/"!==e&&(t+="/"),$host=t},exports.catch=function(t){return $catch=t},exports.fromDataURL=function(t){var e;return e=t.replace(/data:.*;base64,/,""),"/Base64("+e+")/"},exports.call=function(t,e){var n,r,a,o,s;return"function"==typeof e&&(n=r,r=e,e={}),null==e&&(e={}),null==r&&(r=function(){}),null==n&&(n=function(){}),forData(e,function(t,e,n){var r,a;if(t instanceof Date)return r=t,a=r.getTime(),n[e]="/Date("+a+")/"}),o=""+$host+t,e=JSON.stringify(e),s=new XMLHttpRequest,s.open("POST",o,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a=localStorage.getItem("Rubic-Token"),a&&s.setRequestHeader("Rubic-Token",a),s.send(e),new Promise(function(t,n){return s.onreadystatechange=function(){var r;if(s.readyState===XMLHttpRequest.DONE&&(a=s.getResponseHeader("Rubic-Token"),a&&localStorage.setItem("Rubic-Token",a),204===s.status&&t(),200===s.status&&(e=JSON.parse(s.responseText),forData(e,function(t,e,n){var r;if(/^\/Date\(\d+\)\/$/.test(t))return t=t.slice(6,t.length-2),r=parseInt(t),n[e]=new Date(r)}),t(e)),s.status>=400&&(r=JSON.parse(s.responseText),n(r),$catch)))return $catch(r)}})},forData=function(t,e){var n;return(n=function(t,r,a){var o,s,u,c,i,f,l,p;if("boolean"===(p=typeof t)||"number"===p||"string"===p||t instanceof Date)return e(t,r,a);if(Array.isArray(t)){for(f=[],u=c=0,i=t.length;c<i;u=++c)o=t[u],f.push(n(o,u,t));return f}if("object"==typeof t){l=[];for(s in t)o=t[s],l.push(n(o,s,t));return l}})(t,null,null)};